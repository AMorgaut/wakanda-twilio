/** * EXPERIMENTAL * * @module Twillio/core/TwiML * @author alexandre.morgaut@gmail.com **/var	twimlBase,	twimlService,	twimlServiceURL;twimlService = require('./service');twimlServiceURL = twimlService.URL;twimlBase = {	open: '<?xml version="1.0" encoding="UTF-8"?>' + '\n' + '<Response>',	close: '</Response>'};/** * @method createURL * @param {Object} actions * @returns {String} **/exports.createURL = function Twilio_core_TwiML_createURL(actions) {	var		uuid,		twiml,		twilioStore;	if (twimlService.started === false) {		twimlService.start();	}	twiml = [twimlBase.open];	actions.forEach(		function Twilio_core_TwiML_createURL_forEachAction(action) {			var				attributes;			// Attributes managment			attributes = [];			Object.getOwnPropertyNames(action.params).forEach(				function Twilio_core_TwiML_createURL_forEachAttribute(name) {					// add the action attribute:					// paramName="paramValue"					attributes.push(name + '="' + action.params[name] + '"');				}			);			if (attributes.length > 0) {				attributes = ' ' + attributes.join(' ');			} else {				attributes = '';			}			twiml.push(				// add the action tag:				// <actionName param1="value" param2="value">content</actionName>				'<' + action.action + attributes + '>' + action.content + '</' + action.action + '>'			);		}	);	twiml.push(twimlBase.close);	twiml = twiml.join('\n');	storage.lock();	twilioStore = storage.twilio;	twilioStore.twilmlList[uuid] = twiml;	storage.twilio = twilioStore;	storage.unlock();	return twimlServiceURL + uuid;};